(this["webpackJsonpptmfoundation-admin"]=this["webpackJsonpptmfoundation-admin"]||[]).push([[0],{13:function(e,t,n){e.exports={loginInput:"styles_loginInput__1199H",loginButton:"styles_loginButton__m-EkS",error:"styles_error__2y5DR"}},16:function(e,t,n){e.exports={postContainer:"styles_postContainer__1w0gv",post:"styles_post__1KNJg",deleteButton:"styles_deleteButton__o47Gn"}},22:function(e,t,n){e.exports={form:"styles_form__2BpkQ",cancelButton:"styles_cancelButton__lHh0r"}},30:function(e,t,n){e.exports=n(43)},35:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(28),c=n.n(i),l=(n(35),n(9)),r=n(4);n(19),n(26);r.initializeApp({apiKey:"AIzaSyAPr55APpnid8bxmYeBT32Slz_HOnTBsQs",authDomain:"ptmfoundation-8c7fd.firebaseapp.com",databaseURL:"https://ptmfoundation-8c7fd.firebaseio.com",projectId:"ptmfoundation-8c7fd",storageBucket:"ptmfoundation-8c7fd.appspot.com",messagingSenderId:"864000579543",appId:"1:864000579543:web:5944d2c9615ad9f20a9d92"});r.firestore();var u=r.auth(),s=n(13),d=n.n(s),m=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(""),r=Object(l.a)(c,2),s=r[0],m=r[1],p=Object(a.useState)(""),f=Object(l.a)(p,2),h=f[0],b=f[1],g=function(){var e,t;n&&s&&(e=n,t=s,u.signInWithEmailAndPassword(e,t)).catch((function(e){"auth/invalid-email"===e.code?b("Invalid credentials"):(console.log("auth/wrong-password"===e.code),b("Incorrect password"))}))};return o.a.createElement("div",{style:{width:"300px",maxWidth:"100%",margin:"auto",marginTop:"100px"}},o.a.createElement("h1",{style:{textAlign:"center"}},"Login"),o.a.createElement("input",{className:d.a.loginInput,type:"email",placeholder:"email",onKeyDown:function(e){"Enter"===e.key&&g()},onChange:function(e){return i(e.target.value.trim())}}),o.a.createElement("input",{className:d.a.loginInput,style:{width:"300px",maxWidth:"100%",marginBottom:"25px"},type:"password",placeholder:"password",onKeyDown:function(e){"Enter"===e.key&&g()},onChange:function(e){return m(e.target.value.trim())}}),h&&o.a.createElement("div",{className:d.a.error},h),o.a.createElement("button",{disabled:!n||!s,className:d.a.loginButton,onClick:g},"Login"))},p=n(2),f=n(8),h=n(16),b=n.n(h),g=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(p.f)();Object(a.useEffect)((function(){var e=!1;return r.firestore().collection("posts").orderBy("date","desc").get().then((function(t){if(!e){var n=[];t.forEach((function(e){var t=e.data();n.push(Object(f.a)(Object(f.a)({},t),{},{id:e.id}))})),i(n)}})),function(){e=!0}}),[]);return o.a.createElement("div",{className:b.a.postContainer},o.a.createElement("h1",null,"Posts"),o.a.createElement("button",{onClick:function(){return c.push("/PTMFoundationAdmin/new")}},"Create New Post"),n.length?n.map((function(e,t){return o.a.createElement("div",{className:b.a.post,key:t},o.a.createElement("h1",null,e.title),o.a.createElement("img",{alt:"post",src:e.img}),o.a.createElement("button",{onClick:function(){return function(e){return c.push("/PTMFoundationAdmin/edit?post=".concat(e.id))}(e)}},"Edit"),o.a.createElement("button",{onClick:function(){return function(e){window.confirm("Are you sure you want to delete: ".concat(e.title,"?"))&&r.firestore().collection("posts").doc(e.id).delete().then((function(){return c.go()}))}(e)},className:b.a.deleteButton},"Delete"))})):o.a.createElement(o.a.Fragment,null,"No posts yet"))},E=n(22),v=n.n(E),y=function(e){var t=e.isEdit,n=Object(a.useState)({body:"",title:"",img:""}),i=Object(l.a)(n,2),c=i[0],u=i[1],s=Object(p.f)(),d=Object(p.g)();Object(a.useEffect)((function(){var e,n,a=null===(e=d.search)||void 0===e||null===(n=e.split("post="))||void 0===n?void 0:n[1];t&&a&&r.firestore().collection("posts").doc(a).get().then((function(e){var t=e.data();t&&u(t)}))}),[d.search,t]);return o.a.createElement("div",{className:v.a.form},o.a.createElement("h1",null,t?"Edit Post":"Create Post"),o.a.createElement("label",null,"Title"),o.a.createElement("input",{placeholder:"Title",value:c.title,onChange:function(e){return u(Object(f.a)(Object(f.a)({},c),{},{title:e.target.value.trim()}))}}),o.a.createElement("label",null,"Image URL"),o.a.createElement("input",{placeholder:"Image URL",value:c.img,onChange:function(e){return u(Object(f.a)(Object(f.a)({},c),{},{img:e.target.value.trim()}))}}),o.a.createElement("label",null,"Post Body"),o.a.createElement("textarea",{onChange:function(e){return u(Object(f.a)(Object(f.a)({},c),{},{body:e.target.value.trim()}))},placeholder:"Post",defaultValue:c.body}),o.a.createElement("button",{onClick:function(){var e,n,a=null===(e=d.search)||void 0===e||null===(n=e.split("post="))||void 0===n?void 0:n[1];c.title&&c.body&&c.img&&(t&&a?r.firestore().collection("posts").doc(a).update({title:c.title,body:c.body,img:c.img}).then((function(){return s.push("/PTMFoundationAdmin/home")})):r.firestore().collection("posts").add(Object(f.a)(Object(f.a)({},c),{},{date:Date.now()})).then((function(){return s.push("/PTMFoundationAdmin/home")})))}},t?"Update":"Create"),o.a.createElement("button",{className:v.a.cancelButton,onClick:function(){return s.push("/PTMFoundationAdmin/home")}},"Cancel"))},O=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(p.f)();return r.auth().onAuthStateChanged((function(e){i(e)})),Object(a.useEffect)((function(){n?c.push("/PTMFoundationAdmin/home"):c.push("/PTMFoundationAdmin/login")}),[n,c]),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){r.auth().signOut()}},"Log Out"),o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/PTMFoundationAdmin/login"},o.a.createElement(m,null)),o.a.createElement(p.a,{path:"/PTMFoundationAdmin/home"},o.a.createElement(g,null)),o.a.createElement(p.a,{path:"/PTMFoundationAdmin/new"},o.a.createElement(y,{isEdit:!1})),o.a.createElement(p.a,{path:"/PTMFoundationAdmin/edit"},o.a.createElement(y,{isEdit:!0}))))},j=n(11);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j.a,null,o.a.createElement(O,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.fb263304.chunk.js.map